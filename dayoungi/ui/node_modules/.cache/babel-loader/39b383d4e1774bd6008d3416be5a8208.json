{"ast":null,"code":"var _jsxFileName = \"/Users/youngseonkim/Documents/project_final/dayoungi/ui/src/containers/rev/ReviewWrite.jsx\";\nimport React, { useState, useCallback } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport { Link } from 'react-router-dom';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport axios from 'axios';\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\nimport { Nav } from '../../components/cmm';\nimport { useHistory } from 'react-router-dom';\nimport { context as c } from '../../context';\n\nfunction Copyright() {\n  return /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 5\n    }\n  }, 'Copyright © ', /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    href: \"https://material-ui.com/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }\n  }, \"Your Website\"), ' ', new Date().getFullYear(), '.');\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nexport default function ReviewWrite() {\n  const [data, setData] = useState([]);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const history = useHistory();\n  const movieId = data['mov_id'];\n  const userId = sessionStorage.getItem(\"sessionUser\");\n  const write = useCallback(async e => {\n    alert(`UserId: ${userId}, Title: ${title}, Content: ${content}, MovieId: ${movieId}`);\n\n    try {\n      const req = {\n        method: c.post,\n        url: `${c.url}/api/review`,\n        data: {\n          'usr_id': userId,\n          'title': title,\n          'content': content,\n          'mov_id': movieId\n        },\n        auth: c.auth\n      };\n      const res = await axios(req);\n      alert(`WRITING SUCCESS`);\n      history.push('/review-container');\n    } catch (error) {\n      alert(`Writing ${error}`);\n    }\n  });\n  const fetchMovie = useCallback(async e => {\n    const movieDiv = document.querySelector('.movie_img'); // movieDiv.style.display = \"Block\"\n    // alert(\"진입\")\n\n    const title = document.querySelector('#movTitle').value; // alert(title)\n\n    try {\n      const req = {\n        method: c.get,\n        url: `${c.url}/api/movie-search/${title}`,\n        // data: {params: title},\n        auth: c.auth\n      };\n      const res = await axios(req); // alert(res.data[0])\n\n      setData(res.data[0]);\n      movieDiv.style.display = \"Block\";\n    } catch (error) {\n      // alert(`fetchSomeReviews failure ${error}`)\n      alert(`목록에 없는 영화입니다.`);\n      history.push('/write-review');\n    }\n  }, []);\n  const evaluate = useCallback(async e => {\n    alert(\"리뷰 감정 분석을 시작합니다. Close 버튼을 누르고 잠시만 기다려주세요.\");\n    const content = document.querySelector('#outlined-multiline-static').value;\n\n    try {\n      const req = {\n        method: c.get,\n        url: `${c.url}/api/reviewemotion/${content}`,\n        // data: {params: title},\n        auth: c.auth\n      };\n      const res = await axios(req);\n      let score = res.data;\n\n      if (score > 0.5) {\n        alert(`리뷰 내용: ${content}\\n ${Math.round(score * 100)}% 확률로 긍정 리뷰입니다!`);\n      } else {\n        alert(`리뷰 내용: ${content}\\n ${Math.round((1 - score) * 100)}% 확률로 부정 리뷰입니다.`);\n      }\n    } catch (error) {\n      alert(`failure ${error}`);\n    }\n  }, []);\n  const classes = useStyles();\n  const movimg = data['image_naver'];\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(AppBar, {\n    position: \"absolute\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    style: {\n      margin: '100px 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BorderColorIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, \"\\uB9AC\\uBDF0\\uB97C \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mb-3\",\n    style: {\n      margin: '26px 0 0 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"movTitle\",\n    placeholder: \"Type Movie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: fetchMovie,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, \"Search\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"movie_img\",\n    style: {\n      display: 'None',\n      marginTop: 20,\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: classes.poster,\n    src: movimg,\n    style: {\n      width: '40%'\n    },\n    alt: \"img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    label: \"\\uC81C\\uBAA9\",\n    onChange: e => setTitle(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-multiline-static\",\n    label: \"\\uB9AC\\uBDF0\",\n    multiline: true,\n    required: true,\n    fullWidth: true,\n    rows: 4,\n    variant: \"outlined\",\n    onChange: e => setContent(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/review-list\",\n    class: \"btn btn-sm btn-primary\",\n    id: \"btnSave\",\n    onClick: write,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 35\n    }\n  }, \"\\uB4F1\\uB85D\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-sm btn-primary\",\n    id: \"btnSave\",\n    onClick: evaluate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 35\n    }\n  }, \"\\uB098\\uC758 \\uB9AC\\uBDF0 \\uD3C9\\uAC00\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Box, {\n    mt: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Copyright, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/youngseonkim/Documents/project_final/dayoungi/ui/src/containers/rev/ReviewWrite.jsx"],"names":["React","useState","useCallback","Avatar","Button","CssBaseline","TextField","Link","Grid","Box","axios","AppBar","Typography","makeStyles","Container","BorderColorIcon","Nav","useHistory","context","c","Copyright","Date","getFullYear","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","ReviewWrite","data","setData","title","setTitle","content","setContent","history","movieId","userId","sessionStorage","getItem","write","e","alert","req","method","post","url","auth","res","push","error","fetchMovie","movieDiv","document","querySelector","value","get","style","evaluate","score","Math","round","classes","movimg","poster","target"],"mappings":"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","sourcesContent":["import React, {useState, useCallback} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport {Link} from 'react-router-dom';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport axios from 'axios';\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\nimport {Nav} from '../../components/cmm'\nimport {useHistory} from 'react-router-dom'\nimport {context as c} from '../../context'\n\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Your Website\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function ReviewWrite() {\n  const [data, setData] = useState([])\n  const [title, setTitle] = useState('')\n  const [content, setContent] = useState('')\n  const history = useHistory()\n  const movieId = data['mov_id']\n  const userId = sessionStorage.getItem(\"sessionUser\")\n  const write = useCallback(async e=> {\n    alert(`UserId: ${userId}, Title: ${title}, Content: ${content}, MovieId: ${movieId}`)\n    try {\n      const req = {\n          method: c.post,\n          url: `${c.url}/api/review`,\n          data: \n            { \n              'usr_id': userId,\n              'title' : title,\n              'content' : content,\n              'mov_id' : movieId\n            },\n          auth: c.auth\n\n      }\n      const res = await axios(req)\n      alert(`WRITING SUCCESS`)\n      history.push('/review-container')\n  } catch (error){\n    alert(`Writing ${error}`)\n  }\n  })\n\n  const fetchMovie = useCallback(async e=> {\n    const movieDiv = document.querySelector('.movie_img')\n    // movieDiv.style.display = \"Block\"\n    // alert(\"진입\")\n    const title = document.querySelector('#movTitle').value\n    // alert(title)\n    try {\n        const req = {\n            method: c.get,\n            url: `${c.url}/api/movie-search/${title}`,\n            // data: {params: title},\n            auth: c.auth\n\n        }\n        const res = await axios(req)\n          // alert(res.data[0])\n          setData(res.data[0])\n          movieDiv.style.display = \"Block\"\n    } catch (error){\n        // alert(`fetchSomeReviews failure ${error}`)\n        alert(`목록에 없는 영화입니다.`)\n        history.push('/write-review')\n    }\n    \n  },[])\n\n  const evaluate = useCallback(async e=> {\n    alert(\"리뷰 감정 분석을 시작합니다. Close 버튼을 누르고 잠시만 기다려주세요.\")\n    const content = document.querySelector('#outlined-multiline-static').value\n    try {\n      const req = {\n          method: c.get,\n          url: `${c.url}/api/reviewemotion/${content}`,\n          // data: {params: title},\n          auth: c.auth\n\n      }\n      const res = await axios(req)\n        let score = res.data\n        if (score > 0.5) {\n          alert(`리뷰 내용: ${content}\\n ${Math.round(score*100)}% 확률로 긍정 리뷰입니다!`)\n        } else {\n          alert(`리뷰 내용: ${content}\\n ${Math.round((1 - score)*100)}% 확률로 부정 리뷰입니다.`)\n        }\n  } catch (error){\n      alert(`failure ${error}`)\n  }\n  \n  },[])\n\n  const classes = useStyles();\n  const movimg = data['image_naver']\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <AppBar position=\"absolute\">\n        <Nav></Nav>\n      </AppBar>\n      <div className={classes.paper} style={{margin:'100px 0'}}>\n        <Avatar className={classes.avatar}>\n          <BorderColorIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          리뷰를 작성해주세요\n        </Typography>\n        <div class=\"mb-3\" style={{margin: '26px 0 0 0'}}>\n                            {/* <select value={movieId}\n                                    style={{width: '250px', height: '60px'}} \n                                    onChange={e=>setMovieId(e.target.value)}>\n                            </select> */}\n              <input type=\"text\" id='movTitle' placeholder =\"Type Movie\"/> \n            <button onClick={fetchMovie}>Search</button>\n        </div>\n        <div class=\"movie_img\" style={{display: 'None', marginTop: 20, width: '100%'}}>\n          <table style={{width: '100%'}}>\n            {/* <tr>\n              <td>{data['title_kor']}</td>\n            </tr> */}\n            <tr>\n              <td align=\"center\">\n                <img className={classes.poster} src={movimg} style={{width: '40%'}} alt=\"img\"/>\n                </td>\n            </tr>\n          </table>\n        </div>\n        <form className={classes.form} noValidate>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            label=\"제목\"\n            onChange= {e => setTitle(e.target.value)}\n          />\n          <TextField\n          id=\"outlined-multiline-static\"\n          label=\"리뷰\"\n          multiline\n          required\n          fullWidth\n          rows={4}\n          variant=\"outlined\"\n          onChange= {e => setContent(e.target.value)}\n          />\n          {/* <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick = {write}\n            href = \"/review-list\"\n            \n          >\n            등록\n          </Button> */}\n                                  <button type=\"button\">\n                                  <Link to=\"/review-list\" class=\"btn btn-sm btn-primary\" id=\"btnSave\" onClick={write}>\n                                  등록\n                                  </Link>\n                                  </button>\n                                  <button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"btnSave\" onClick={evaluate}>\n                                  나의 리뷰 평가\n                                  </button>\n\n          <Grid container>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  );\n}\n\n\n"]},"metadata":{},"sourceType":"module"}